---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import { getAllRecipes } from "../../../lib/contentful";

const recipes = await getAllRecipes();
---

<BaseLayout title="Recipes" description="Browse my collection of recipes.">
  <div class="container">
    <h1 class="text-2xl font-bold">Recipes</h1>

    <div class="row mt-4 recipe-list">
      {
        recipes
          .sort((a: any, b: any) => a.name.localeCompare(b.name))
          .map((recipe: any) => (
            <div class="recipe-list-item" key={recipe.slug}>
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">
                    <a href={"/workshop/recipes/" + recipe.slug}>
                      {recipe.name}
                    </a>
                  </h5>
                  {recipe.rating ? (
                    <p class="card-text">{"‚≠ê".repeat(recipe.rating)}</p>
                  ) : (
                    <p class="card-text">Not rated (yet!)</p>
                  )}
                </div>
              </div>
            </div>
          ))
      }
    </div>
  </div>
</BaseLayout>
